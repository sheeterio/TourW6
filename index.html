<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wirtualna wycieczka po W6</title>
    <style>
        body {
            margin: 0;
            display: flex;
            height: 100vh;
            overflow: hidden;
			flex-direction: row;
        }

        #map {
            flex: 1;
        }

        #pannellum {
            flex: 1;
            position: relative;
            background: black;
			overflow: hidden;
        }
		
		#panorama {
			width: 100%;
			height: 100%;
			position: absolute;
			top: 0;
			left: 0;
		}

		#controls {
			position: absolute;
			bottom: 10px;
			width: 100%;
			display: flex;
			justify-content: space-between;
			align-items: center;
			color: white;
			font-family: Arial, sans-serif;
			pointer-events: none;
		}

        .button {
            background: gray;
            color: white;
            border: none;
            padding: 10px;
            cursor: pointer;
            flex: 0 0 30%;
            text-align: center;
            border-radius: 5px;
			pointer-events: auto;
        }

        .counter {
            flex: 1;
            text-align: center;
		}	
		
		.legend {
			background: rgba(255, 255, 255, 0.8);
			padding: 10px;
			border-radius: 5px;
			line-height: 18px;
			box-shadow: 0 0 15px rgba(0, 0, 0, 0.2);
			font-size: 12px;
			color: #333;
		}
		.legend h4 {
			margin: 0 0 5px;
			font-weight: bold;
			font-size: 14px;
		}
		.legend i {
			display: inline-block;
			margin-right: 5px;
			opacity: 0.8;
			vertical-align: middle;
		}
		.marker {
			border-radius: 50%;
			border: 1px solid #000;
			width: 9px;
			height: 9px;
		}
		.marker.purple {
			background-color: rgb(255,0,198);
		}
		.marker.red {
			background-color: rgb(255,0,0);
		}
		.marker.green {
			background-color: rgb(0,255,0);
		}
		.marker.yellow {
			background-color: rgb(255,255,0);
		}
		.marker.blue {
			background-color: rgb(0,112,255);
		}
		.square {
			width: 18px;
			height: 18px;
			margin-right: 8px;
			border: 1px solid #000;
		}
		.square.light-purple {
			background-color: rgb(240,204,230);
		}
		.square.light-red {
			background-color: rgb(255,197,181);
		}
		.square.light-green {
			background-color: rgb(201,251,202);
		}
		.square.light-yellow {
			background-color: rgb(204,237,255);
		}
		.square.light-blue {
			background-color: rgb(204,237,255);
		}
		
		
		.model-button {
			background-color: gray;
			color: white;
			font-weight: bold;
			padding: 10px 15px;
			border: none;
			border-radius: 5px;
			cursor: pointer;
			position: absolute;
			z-index: 1000;
			left: 50%;
			top: 155px;
			transform: translateX(-110%);
		}
		.model-button:hover {
			background-color: #555;
		}
		.model-modal {
			position: fixed;
			z-index: 1000;
			left: 0;
			top: 0;
			width: 100%;
			height: 100%;
			background-color: rgba(0, 0, 0, 0.7);
			overflow: auto;
			display:flex;
			justify-content: center;
			align-items: center;
			display: none;
		}
		.model-modal-content {
			background-color: white;
			margin: 5% auto;
			padding: 0;
			width: 80%;
			height: 80%;
			position: relative;
			display: flex;
		}
		.sketchfab-embed-wrapper {
			flex-grow: 1;
			display: flex;
			align-items: center;
			justify-content: center;
		}
		.sketchfab-embed-wrapper iframe {
			width: 100%;
			height: 100%;
		}
		.close-button {
			color: red;
			font-size: 50px;
			font-weight: bold;
			position: absolute;
			top: 0;
			right: 10px;
			cursor: pointer;
		}
		.close-button:hover,
		.close-button:focus {
			color: white;
			text-decoration: none;
		}
		
        @media screen and (max-aspect-ratio: 1/1) {
			body {
				flex-direction: column; /* Stack elements vertically */
			}

			#map {
				flex: 1; /* Take up half the screen height */
				min-height: 50vh;
			}

			#pannellum {
				flex: 1; /* Take up the other half */
				min-height: 50vh;
			}
			
			.model-button {
				left: auto;  /* Reset left positioning */
				right: 10px; /* Align to the right screen border */
				transform: none; /* Remove centering offset */
			}
		}
    </style>
    <link rel="stylesheet" href="css/leaflet.css">
	<link rel="stylesheet" href="pannellum/pannellum.css"/>
	<link rel="stylesheet" href="css/easy-button.css"/>
</head>
<body>
    <!-- Leaflet Map -->
    <div id="map"></div>

    <!-- Pannellum Viewer -->
    <div id="pannellum">
        <div id="panorama"></div>
        <div id="controls">
            <button id="previous" class="button">Poprzedni</button>
            <div id="counter" class="counter">brak</div>
            <button id="next" class="button">Następny</button>
        </div>
    </div>

	<!-- 3D Model Viewer -->
	<button id="modelButton1" class="model-button">Model 3D Wnętrza</button>
	<button id="modelButton2" class="model-button" style="top: 200px;">Model 3D Budynku</button>
	<div id="modelModal" class="model-modal">
        <div class="model-modal-content">
            <span id="closeModal" class="close-button">&times;</span>
            <div class="sketchfab-embed-wrapper">
                <iframe id="modelIframe" frameborder="0" allowfullscreen mozallowfullscreen="true" webkitallowfullscreen="true"; fullscreen" src=""></iframe>
            </div>
        </div>
    </div>

    <script src="js/leaflet.js"></script>
    <script src="pannellum/pannellum.js"></script>
	<script src="js/easy-button.js"></script>
	<script src="data/L1_Bud_0.js"></script>
	<script src="data/Nothing.js"></script>
	<script src="data/ObrysP0_1.js"></script>
	<script src="data/FotoP0_2.js"></script>
	<script src="data/ObrysP1_3.js"></script>
	<script src="data/FotoP1_4.js"></script>
	
	<script src="data/HolP0_1.js"></script>
	<script src="data/PokojeP0_2.js"></script>
	<script src="data/HolP1_5.js"></script>
	<script src="data/PokojeP1_6.js"></script>
	<script src="data/HolP2_9.js"></script>
	<script src="data/PokojeP2_10.js"></script>
	<script src="data/ObrysP2_11.js"></script>
	<script src="data/FotoP2_12.js"></script>
	<script src="data/HolP3_13.js"></script>
	<script src="data/PokojeP3_14.js"></script>
	<script src="data/ObrysP3_15.js"></script>
	<script src="data/FotoP3_16.js"></script>
    <script>
        // Definicja mapy Leaflet
        const map = L.map('map').setView([51.1044, 17.0544], 18);
		const bounds = L.latLngBounds(
			[51.1044 - 0.00085, 17.0544 - 0.00172], //SW wierzchołek
			[51.1044 + 0.0009, 17.0544 + 0.00152]  //NE wierzchołek
		);
		map.setMaxBounds(bounds);
		//map.setMaxBounds(map.getBounds());
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 22,
			maxNativeZoom:19,
			minZoom: 17,
            attribution: '© OpenStreetMap contributors'
        }).addTo(map);
		
		// FUNKCJE
		var highlightLayer; // Zaznaczenie obiektu
        function highlightFeature(e) {
            highlightLayer = e.target;

            if (e.target.feature.geometry.type === 'LineString' || e.target.feature.geometry.type === 'MultiLineString') {
              highlightLayer.setStyle({
                color: '#ffffff',
              });
            } else {
              highlightLayer.setStyle({
                fillColor: '#ffffff',
                fillOpacity: 1
              });
            }
        }
		
		// Definicja warstwy bazowej L1_Bud
		function style_L1_Bud() {
            return {
                pane: 'pane_L1_Bud',
                opacity: 1,
                color: 'rgba(161,100,22,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(252,240,194,1.0)',
                interactive: false,
            }
        }
        map.createPane('pane_L1_Bud'); // Pane is basically a 2D ZIndex
        map.getPane('pane_L1_Bud').style.zIndex = 400;
        map.getPane('pane_L1_Bud').style['mix-blend-mode'] = 'normal';
        var lr_L1_Bud = new L.geoJson(json_L1_Bud_0, {
            attribution: '',
            interactive: false,
            dataVar: 'json_L1_Bud_0',
            layerName: 'L1_Bud',
            pane: 'pane_L1_Bud',
            style: style_L1_Bud,
        });
        map.addLayer(lr_L1_Bud);
		
		function style_Nothing() {
            return {
                pane: 'pane_Nothing',
                opacity: 0,
                color: 'rgba(0,0,0,0.0)',
                interactive: false,
            }
        }
        map.createPane('pane_Nothing');
        map.getPane('pane_Nothing').style.zIndex = 300;
        map.getPane('pane_Nothing').style['mix-blend-mode'] = 'normal';
        var lr_Nothing = new L.geoJson(json_Nothing, {
            attribution: '',
            interactive: false,
            dataVar: 'json_Nothing',
            layerName: 'Nothing',
            pane: 'pane_Nothing',
            style: style_Nothing,
        });
        //map.addLayer(lr_Nothing);
		
		// P0 - Definicja HolP0
		function style_HolP0(feature) {
            switch(String(feature.properties['Klasa'])) {
                case 'Hol':
                    return {
                pane: 'pane_HolP0',
                opacity: 1,
                color: 'rgba(35,35,35,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(204,237,255,1.0)',
                interactive: false,
            }
                    break;
                case 'Hol główny':
                    return {
                pane: 'pane_HolP0',
                opacity: 1,
                color: 'rgba(35,35,35,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(240,204,230,1.0)',
                interactive: false,
            }
                    break;
                case 'Korytarz':
                    return {
                pane: 'pane_HolP0',
                opacity: 1,
                color: 'rgba(35,35,35,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(255,197,181,1.0)',
                interactive: false,
            }
                    break;
                default:
                    return {
                pane: 'pane_HolP0',
                opacity: 1,
                color: 'rgba(35,35,35,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(234,232,128,1.0)',
                interactive: false,
            }
                    break;
            }
        }
        map.createPane('pane_HolP0');
        map.getPane('pane_HolP0').style.zIndex = 401;
        map.getPane('pane_HolP0').style['mix-blend-mode'] = 'normal';
        var lr_HolP0 = new L.geoJson(json_HolP0_1, {
            attribution: '',
            interactive: false,
            dataVar: 'json_HolP0_1',
            layerName: 'HolP0',
            pane: 'pane_HolP0',
            style: style_HolP0,
        });
		
		// P0 - Definicja PokojeP0
		function style_PokojeP0() {
            return {
                pane: 'pane_PokojeP0',
                opacity: 1,
                color: 'rgba(35,35,35,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(202,252,203,1.0)',
                interactive: false,
            }
        }
        map.createPane('pane_PokojeP0');
        map.getPane('pane_PokojeP0').style.zIndex = 402;
        map.getPane('pane_PokojeP0').style['mix-blend-mode'] = 'normal';
        var lr_PokojeP0 = new L.geoJson(json_PokojeP0_2, {
            attribution: '',
            interactive: false,
            dataVar: 'json_PokojeP0_2',
            layerName: 'PokojeP0',
            pane: 'pane_PokojeP0',
            style: style_PokojeP0,
        });
		
		// P0 - Definicja ObrysP0
		function style_ObrysP0() {
            return {
                pane: 'pane_ObrysP0',
                opacity: 1,
                color: 'rgba(137,89,26,1.0)',
                dashArray: '',
                lineCap: 'square',
                lineJoin: 'bevel',
                weight: 1.0,
                fillOpacity: 0,
                interactive: false,
            }
        }
        map.createPane('pane_ObrysP0');
        map.getPane('pane_ObrysP0').style.zIndex = 403;
        map.getPane('pane_ObrysP0').style['mix-blend-mode'] = 'normal';
        var lr_ObrysP0 = new L.geoJson(json_ObrysP0_1, {
            attribution: '',
            interactive: false,
            dataVar: 'json_ObrysP0_1',
            layerName: 'ObrysP0',
            pane: 'pane_ObrysP0',
            style: style_ObrysP0,
        });
		
		// P0 - Definicja FotoP0
		function pop_FotoP0(feature, layer) {
            layer.on({
                mouseout: function(e) {
                    for (var i in e.target._eventParents) {
                        if (typeof e.target._eventParents[i].resetStyle === 'function') {
                            e.target._eventParents[i].resetStyle(e.target);
                        }
                    }
                },
                mouseover: highlightFeature,
            });
            var popupContent = feature.properties.ID;
			layer.on('popupopen', function(e) {
				panolayer = lr_FotoP0 //'L1P3'; // lr_FotoP0
				currentIndex=feature.properties.ID;
				totalPanoramas=lr_FotoP0.getLayers()[lr_FotoP0.getLayers().length-1].feature.properties.ID;
				document.getElementById('counter').innerText = `${currentIndex}/${totalPanoramas}`+addextra(currentIndex);
				updatePanorama(currentIndex);
			});
			layer.bindPopup(popupContent, {maxWidth: 0,closeButton: false});
        }
        function style_FotoP0(feature) {
            switch(String(feature.properties['Klasa'])) {
                case 'Hol':
                    return {
                pane: 'pane_FotoP0',
                radius: 4.0,
                opacity: 1,
                color: 'rgba(35,35,35,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1,
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(255,0,0,1.0)',
                interactive: true,
            }
                    break;
                case 'Hol główny':
                    return {
                pane: 'pane_FotoP0',
                radius: 4.0,
                opacity: 1,
                color: 'rgba(35,35,35,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1,
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(255,0,198,1.0)',
                interactive: true,
            }
                    break;
                case 'Korytarz':
                    return {
                pane: 'pane_FotoP0',
                radius: 4.0,
                opacity: 1,
                color: 'rgba(35,35,35,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1,
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(86,255,0,1.0)',
                interactive: true,
            }
                    break;
                case 'Na zewnątrz':
                    return {
                pane: 'pane_FotoP0',
                radius: 4.0,
                opacity: 1,
                color: 'rgba(35,35,35,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1,
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(0,112,255,1.0)',
                interactive: true,
            }
                    break;
                case 'Pokój':
                    return {
                pane: 'pane_FotoP0',
                radius: 4.0,
                opacity: 1,
                color: 'rgba(35,35,35,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1,
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(255,255,0,1.0)',
                interactive: true,
            }
                    break;
                default:
                    return {
                pane: 'pane_FotoP0',
                radius: 4.0,
                opacity: 1,
                color: 'rgba(35,35,35,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1,
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(67,30,213,1.0)',
                interactive: true,
            }
                    break;
            }
        }
        map.createPane('pane_FotoP0');
        map.getPane('pane_FotoP0').style.zIndex = 404;
        map.getPane('pane_FotoP0').style['mix-blend-mode'] = 'normal';
        var lr_FotoP0 = new L.geoJson(json_FotoP0_2, {
            attribution: 'Rafal L',
            interactive: true,
            dataVar: 'json_FotoP0_2',
            layerName: 'FotoP0',
            pane: 'pane_FotoP0',
            onEachFeature: pop_FotoP0,
            pointToLayer: function (feature, latlng) {
                var context = {
                    feature: feature,
                    variables: {}
                };
                return L.circleMarker(latlng, style_FotoP0(feature));
            },
        });
		
		// P1 - HolP1
		function style_HolP1(feature) {
            switch(String(feature.properties['Klasa'])) {
                case 'Hol':
                    return {
                pane: 'pane_HolP1',
                opacity: 1,
                color: 'rgba(35,35,35,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(204,237,255,1.0)',
                interactive: false,
            }
                    break;
                case 'Hol główny':
                    return {
                pane: 'pane_HolP1',
                opacity: 1,
                color: 'rgba(35,35,35,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(240,204,230,1.0)',
                interactive: false,
            }
                    break;
                case 'Korytarz':
                    return {
                pane: 'pane_HolP1',
                opacity: 1,
                color: 'rgba(35,35,35,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(255,197,181,1.0)',
                interactive: false,
            }
                    break;
                default:
                    return {
                pane: 'pane_HolP1',
                opacity: 1,
                color: 'rgba(35,35,35,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(234,232,128,1.0)',
                interactive: false,
            }
                    break;
            }
        }
        map.createPane('pane_HolP1');
        map.getPane('pane_HolP1').style.zIndex = 401;
        map.getPane('pane_HolP1').style['mix-blend-mode'] = 'normal';
        var lr_HolP1 = new L.geoJson(json_HolP1_5, {
            attribution: '',
            interactive: false,
            dataVar: 'json_HolP1_5',
            layerName: 'HolP1',
            pane: 'pane_HolP1',
            style: style_HolP1,
        });
		
		// P1 - ObrysP1
        function style_ObrysP1() {
            return {
                pane: 'pane_ObrysP1',
                opacity: 1,
                color: 'rgba(137,89,26,1.0)',
                dashArray: '',
                lineCap: 'square',
                lineJoin: 'bevel',
                weight: 1.0,
                fillOpacity: 0,
                interactive: false,
            }
        }
        map.createPane('pane_ObrysP1');
        map.getPane('pane_ObrysP1').style.zIndex = 403;
        map.getPane('pane_ObrysP1').style['mix-blend-mode'] = 'normal';
        var lr_ObrysP1 = new L.geoJson(json_ObrysP1_3, {
            attribution: '',
            interactive: false,
            dataVar: 'json_ObrysP1_3',
            layerName: 'ObrysP1',
            pane: 'pane_ObrysP1',
            style: style_ObrysP1,
        });
		
        // P1 - PokojeP1
		function style_PokojeP1() {
            return {
                pane: 'pane_PokojeP1',
                opacity: 1,
                color: 'rgba(35,35,35,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(201,251,202,1.0)',
                interactive: false,
            }
        }
        map.createPane('pane_PokojeP1');
        map.getPane('pane_PokojeP1').style.zIndex = 402;
        map.getPane('pane_PokojeP1').style['mix-blend-mode'] = 'normal';
        var lr_PokojeP1 = new L.geoJson(json_PokojeP1_6, {
            attribution: '',
            interactive: false,
            dataVar: 'json_PokojeP1_6',
            layerName: 'PokojeP1',
            pane: 'pane_PokojeP1',
            style: style_PokojeP1,
        });
		
		// P1 - FotoP1
        function pop_FotoP1(feature, layer) {
            layer.on({
                mouseout: function(e) {
                    for (var i in e.target._eventParents) {
                        if (typeof e.target._eventParents[i].resetStyle === 'function') {
                            e.target._eventParents[i].resetStyle(e.target);
                        }
                    }
                },
                mouseover: highlightFeature,
            });
            var popupContent = feature.properties.ID;
			layer.on('popupopen', function(e) {
				panolayer = lr_FotoP1 //'L2P3'; // lr_FotoP1
				currentIndex=feature.properties.ID;
				totalPanoramas=lr_FotoP1.getLayers()[lr_FotoP1.getLayers().length-1].feature.properties.ID;
				document.getElementById('counter').innerText = `${currentIndex}/${totalPanoramas}`+addextra(currentIndex);
				updatePanorama(currentIndex);
			});
			layer.bindPopup(popupContent, {maxWidth: 0,closeButton: false});
        }
        function style_FotoP1(feature) {
            switch(String(feature.properties['Klasa'])) {
                case 'Hol':
                    return {
                pane: 'pane_FotoP1',
                radius: 4.0,
                opacity: 1,
                color: 'rgba(35,35,35,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1,
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(252,0,0,1.0)',
                interactive: true,
            }
                    break;
                case 'Hol główny':
                    return {
                pane: 'pane_FotoP1',
                radius: 4.0,
                opacity: 1,
                color: 'rgba(35,35,35,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1,
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(251,0,195,1.0)',
                interactive: true,
            }
                    break;
                case 'Korytarz':
                    return {
                pane: 'pane_FotoP1',
                radius: 4.0,
                opacity: 1,
                color: 'rgba(35,35,35,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1,
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(85,251,0,1.0)',
                interactive: true,
            }
                    break;
                case 'Łazienka':
                    return {
                pane: 'pane_FotoP1',
                radius: 4.0,
                opacity: 1,
                color: 'rgba(35,35,35,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1,
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(255,255,0,1.0)',
                interactive: true,
            }
                    break;
                default:
                    return {
                pane: 'pane_FotoP1',
                radius: 4.0,
                opacity: 1,
                color: 'rgba(35,35,35,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1,
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(63,110,203,1.0)',
                interactive: true,
            }
                    break;
            }
        }
        map.createPane('pane_FotoP1');
        map.getPane('pane_FotoP1').style.zIndex = 404;
        map.getPane('pane_FotoP1').style['mix-blend-mode'] = 'normal';
        var lr_FotoP1 = new L.geoJson(json_FotoP1_4, {
            attribution: 'Rafal L',
            interactive: true,
            dataVar: 'json_FotoP1_4',
            layerName: 'FotoP1',
            pane: 'pane_FotoP1',
            onEachFeature: pop_FotoP1,
            pointToLayer: function (feature, latlng) {
                var context = {
                    feature: feature,
                    variables: {}
                };
                return L.circleMarker(latlng, style_FotoP1(feature));
            },
        });
		
		// P2 - HolP2
		
		function style_HolP2(feature) {
            switch(String(feature.properties['Klasa'])) {
                case 'Hol':
                    return {
                pane: 'pane_HolP2',
                opacity: 1,
                color: 'rgba(35,35,35,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(198,230,248,1.0)',
                interactive: false,
            }
                    break;
                case 'Hol główny':
                    return {
                pane: 'pane_HolP2',
                opacity: 1,
                color: 'rgba(35,35,35,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(234,199,225,1.0)',
                interactive: false,
            }
                    break;
                case 'Korytarz':
                    return {
                pane: 'pane_HolP2',
                opacity: 1,
                color: 'rgba(35,35,35,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(243,188,172,1.0)',
                interactive: false,
            }
                    break;
                default:
                    return {
                pane: 'pane_HolP2',
                opacity: 1,
                color: 'rgba(35,35,35,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(225,223,123,1.0)',
                interactive: false,
            }
                    break;
            }
        }
        map.createPane('pane_HolP2');
        map.getPane('pane_HolP2').style.zIndex = 401;
        map.getPane('pane_HolP2').style['mix-blend-mode'] = 'normal';
        var lr_HolP2 = new L.geoJson(json_HolP2_9, {
            attribution: '',
            interactive: false,
            dataVar: 'json_HolP2_9',
            layerName: 'HolP2',
            pane: 'pane_HolP2',
            style: style_HolP2,
        });
		
		// P2 - PokojeP2
		
		function style_PokojeP2() {
            return {
                pane: 'pane_PokojeP2',
                opacity: 1,
                color: 'rgba(35,35,35,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(200,250,201,1.0)',
                interactive: false,
            }
        }
        map.createPane('pane_PokojeP2');
        map.getPane('pane_PokojeP2').style.zIndex = 402;
        map.getPane('pane_PokojeP2').style['mix-blend-mode'] = 'normal';
        var lr_PokojeP2 = new L.geoJson(json_PokojeP2_10, {
            attribution: '',
            interactive: false,
            dataVar: 'json_PokojeP2_10',
            layerName: 'PokojeP2',
            pane: 'pane_PokojeP2',
            style: style_PokojeP2,
        });
		
		// P2 - ObrysP2
		
		function style_ObrysP2() {
            return {
                pane: 'pane_ObrysP2',
                opacity: 1,
                color: 'rgba(137,89,26,1.0)',
                dashArray: '',
                lineCap: 'square',
                lineJoin: 'bevel',
                weight: 1.0,
                fillOpacity: 0,
                interactive: false,
            }
        }
        map.createPane('pane_ObrysP2');
        map.getPane('pane_ObrysP2').style.zIndex = 403;
        map.getPane('pane_ObrysP2').style['mix-blend-mode'] = 'normal';
        var lr_ObrysP2 = new L.geoJson(json_ObrysP2_11, {
            attribution: '',
            interactive: false,
            dataVar: 'json_ObrysP2_11',
            layerName: 'ObrysP2',
            pane: 'pane_ObrysP2',
            style: style_ObrysP2,
        });
		
		// P2 - FotoP2
		
		function pop_FotoP2(feature, layer) {
            layer.on({
                mouseout: function(e) {
                    for (var i in e.target._eventParents) {
                        if (typeof e.target._eventParents[i].resetStyle === 'function') {
                            e.target._eventParents[i].resetStyle(e.target);
                        }
                    }
                },
                mouseover: highlightFeature,
            });
            var popupContent = feature.properties.ID;
			layer.on('popupopen', function(e) {
				panolayer = lr_FotoP2 //'L2P3'; // lr_FotoP2
				currentIndex=feature.properties.ID;
				totalPanoramas=lr_FotoP2.getLayers()[lr_FotoP2.getLayers().length-1].feature.properties.ID;
				document.getElementById('counter').innerText = `${currentIndex}/${totalPanoramas}`+addextra(currentIndex);
				updatePanorama(currentIndex);
			});
			layer.bindPopup(popupContent, {maxWidth: 0,closeButton: false});
        }
        function style_FotoP2(feature) {
            switch(String(feature.properties['Klasa'])) {
                case 'Hol':
                    return {
                pane: 'pane_FotoP2',
                radius: 4.0,
                opacity: 1,
                color: 'rgba(35,35,35,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1,
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(255,0,0,1.0)',
                interactive: true,
            }
                    break;
                case 'Hol główny':
                    return {
                pane: 'pane_FotoP2',
                radius: 4.0,
                opacity: 1,
                color: 'rgba(35,35,35,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1,
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(255,0,198,1.0)',
                interactive: true,
            }
                    break;
                case 'Korytarz':
                    return {
                pane: 'pane_FotoP2',
                radius: 4.0,
                opacity: 1,
                color: 'rgba(35,35,35,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1,
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(86,255,0,1.0)',
                interactive: true,
            }
                    break;
                case 'Sala wykładowa':
                    return {
                pane: 'pane_FotoP2',
                radius: 4.0,
                opacity: 1,
                color: 'rgba(35,35,35,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1,
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(255,255,0,1.0)',
                interactive: true,
            }
                    break;
                default:
                    return {
                pane: 'pane_FotoP2',
                radius: 4.0,
                opacity: 1,
                color: 'rgba(35,35,35,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1,
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(102,35,218,1.0)',
                interactive: true,
            }
                    break;
            }
        }
		map.createPane('pane_FotoP2');
        map.getPane('pane_FotoP2').style.zIndex = 404;
        map.getPane('pane_FotoP2').style['mix-blend-mode'] = 'normal';
        var lr_FotoP2 = new L.geoJson(json_FotoP2_12, {
            attribution: 'Rafal L',
            interactive: true,
            dataVar: 'json_FotoP2_12',
            layerName: 'FotoP2',
            pane: 'pane_FotoP2',
            onEachFeature: pop_FotoP2,
            pointToLayer: function (feature, latlng) {
                var context = {
                    feature: feature,
                    variables: {}
                };
                return L.circleMarker(latlng, style_FotoP2(feature));
            },
        });
		
		// P3 - HolP3
		
		function style_HolP3(feature) {
            switch(String(feature.properties['Klasa'])) {
                case 'Hol':
                    return {
                pane: 'pane_HolP3',
                opacity: 1,
                color: 'rgba(35,35,35,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(191,222,239,1.0)',
                interactive: false,
            }
                    break;
                case 'Hol główny':
                    return {
                pane: 'pane_HolP3',
                opacity: 1,
                color: 'rgba(35,35,35,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(229,195,221,1.0)',
                interactive: false,
            }
                    break;
                case 'Korytarz':
                    return {
                pane: 'pane_HolP3',
                opacity: 1,
                color: 'rgba(35,35,35,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(243,188,172,1.0)',
                interactive: false,
            }
                    break;
                default:
                    return {
                pane: 'pane_HolP3',
                opacity: 1,
                color: 'rgba(35,35,35,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(225,223,123,1.0)',
                interactive: false,
            }
                    break;
            }
        }
        map.createPane('pane_HolP3');
        map.getPane('pane_HolP3').style.zIndex = 401;
        map.getPane('pane_HolP3').style['mix-blend-mode'] = 'normal';
        var lr_HolP3 = new L.geoJson(json_HolP3_13, {
            attribution: '',
            interactive: false,
            dataVar: 'json_HolP3_13',
            layerName: 'HolP3',
            pane: 'pane_HolP3',
            style: style_HolP3,
        });
		
		// P3 - PokojeP3
		
		function style_PokojeP3() {
            return {
                pane: 'pane_PokojeP3',
                opacity: 1,
                color: 'rgba(35,35,35,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(199,249,200,1.0)',
                interactive: false,
            }
        }
        map.createPane('pane_PokojeP3');
        map.getPane('pane_PokojeP3').style.zIndex = 402;
        map.getPane('pane_PokojeP3').style['mix-blend-mode'] = 'normal';
        var lr_PokojeP3 = new L.geoJson(json_PokojeP3_14, {
            attribution: '',
            interactive: false,
            dataVar: 'json_PokojeP3_14',
            layerName: 'PokojeP3',
            pane: 'pane_PokojeP3',
            style: style_PokojeP3,
        });
		
		// P3 - ObrysP3
		
		function style_ObrysP3() {
            return {
                pane: 'pane_ObrysP3',
                opacity: 1,
                color: 'rgba(137,89,26,1.0)',
                dashArray: '',
                lineCap: 'square',
                lineJoin: 'bevel',
                weight: 1.0,
                fillOpacity: 0,
                interactive: false,
            }
        }
        map.createPane('pane_ObrysP3');
        map.getPane('pane_ObrysP3').style.zIndex = 403;
        map.getPane('pane_ObrysP3').style['mix-blend-mode'] = 'normal';
        var lr_ObrysP3 = new L.geoJson(json_ObrysP3_15, {
            attribution: '',
            interactive: false,
            dataVar: 'json_ObrysP3_15',
            layerName: 'ObrysP3',
            pane: 'pane_ObrysP3',
            style: style_ObrysP3,
        });
		
		// P3 - FotoP3
		
		function pop_FotoP3(feature, layer) {
            layer.on({
                mouseout: function(e) {
                    for (var i in e.target._eventParents) {
                        if (typeof e.target._eventParents[i].resetStyle === 'function') {
                            e.target._eventParents[i].resetStyle(e.target);
                        }
                    }
                },
                mouseover: highlightFeature,
            });
            var popupContent = feature.properties.ID;
			layer.on('popupopen', function(e) {
				panolayer = lr_FotoP3 //'L2P3'; // lr_FotoP3
				currentIndex=feature.properties.ID;
				totalPanoramas=lr_FotoP3.getLayers()[lr_FotoP3.getLayers().length-1].feature.properties.ID;
				document.getElementById('counter').innerText = `${currentIndex}/${totalPanoramas}`+addextra(currentIndex);
				updatePanorama(currentIndex);
			});
			layer.bindPopup(popupContent, {maxWidth: 0,closeButton: false});
        }
        function style_FotoP3(feature) {
            switch(String(feature.properties['Klasa'])) {
                case 'Hol':
                    return {
                pane: 'pane_FotoP3',
                radius: 4.0,
                opacity: 1,
                color: 'rgba(35,35,35,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1,
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(251,0,0,1.0)',
                interactive: true,
            }
                    break;
                case 'Hol główny':
                    return {
                pane: 'pane_FotoP3',
                radius: 4.0,
                opacity: 1,
                color: 'rgba(35,35,35,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1,
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(251,0,195,1.0)',
                interactive: true,
            }
                    break;
                case 'Korytarz':
                    return {
                pane: 'pane_FotoP3',
                radius: 4.0,
                opacity: 1,
                color: 'rgba(35,35,35,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1,
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(85,252,0,1.0)',
                interactive: true,
            }
                    break;
                default:
                    return {
                pane: 'pane_FotoP3',
                radius: 4.0,
                opacity: 1,
                color: 'rgba(35,35,35,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1,
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(130,33,210,1.0)',
                interactive: true,
            }
                    break;
            }
        }
        map.createPane('pane_FotoP3');
        map.getPane('pane_FotoP3').style.zIndex = 404;
        map.getPane('pane_FotoP3').style['mix-blend-mode'] = 'normal';
        var lr_FotoP3 = new L.geoJson(json_FotoP3_16, {
            attribution: 'Rafal L',
            interactive: true,
            dataVar: 'json_FotoP3_16',
            layerName: 'FotoP3',
            pane: 'pane_FotoP3',
            onEachFeature: pop_FotoP3,
            pointToLayer: function (feature, latlng) {
                var context = {
                    feature: feature,
                    variables: {}
                };
                return L.circleMarker(latlng, style_FotoP3(feature));
            },
        });
					
		// LEGENDA
		var legend = L.control({ position: "bottomleft" });
		legend.onAdd = function(map) {
			var div = L.DomUtil.create("div", "legend");
			div.innerHTML += "<h4><b>LEGENDA</b></h4>";
			div.innerHTML += '<i class="marker purple"></i><i class="square light-purple"></i><span>Hol główny</span><br>';
			div.innerHTML += '<i class="marker red"></i><i class="square light-blue"></i><span>Hol</span><br>';
			div.innerHTML += '<i class="marker green"></i><i class="square light-red"></i><span>Korytarz</span><br>';
			div.innerHTML += '<i class="marker yellow"></i><i class="square light-green"></i><span>Pokój</span><br>';
			div.innerHTML += '<i class="marker blue"></i><span>Na zewnątrz</span><br>';
			return div;
		};
		legend.addTo(map);
		
		// KONIEC GRAFICZNEJ CZĘŚCI
		//
		//
		//
		// GRUPY I MAPY (Tu określane są grupy pięter, dalej 
		var poziomy=[];
		//PRZYKŁAD: poziomy.push([fotoP, L.layerGroup([fotoP, obrys, pokoje, hole])]);
		poziomy.push([lr_FotoP0, L.layerGroup([lr_FotoP0, lr_ObrysP0, lr_PokojeP0, lr_HolP0])]);
		poziomy[0][1].addTo(map);
		poziomy.push([lr_FotoP1, L.layerGroup([lr_FotoP1, lr_ObrysP1, lr_PokojeP1, lr_HolP1])]);
		poziomy.push([lr_FotoP2, L.layerGroup([lr_FotoP2, lr_ObrysP2, lr_PokojeP2, lr_HolP2])]);
		poziomy.push([lr_FotoP3, L.layerGroup([lr_FotoP3, lr_ObrysP3, lr_PokojeP3, lr_HolP3])]);
		var baseMaps = {
			"Parter": poziomy[0][1],
			"Piętro 1": poziomy[1][1],
			"Piętro 2": poziomy[2][1],
			"Piętro 3": poziomy[3][1]
		};
		var overlays = {
			"Budynek L-1": lr_L1_Bud,
			"Tryb low data": lr_Nothing
		};
		L.control.layers(baseMaps,overlays,{collapsed:false}).addTo(map);
		
		// ZMIANA WARSTW
		function selectPanoLayer(pozuu) {
			grupa=pozuu;
			panolayer = grupa[0]; //np: lr_FotoP0
			currentIndex=1;
			totalPanoramas=panolayer.getLayers()[panolayer.getLayers().length-1].feature.properties.ID;
			document.getElementById('counter').innerText = `${currentIndex}/${totalPanoramas}`+addextra(currentIndex);
			updatePanorama(currentIndex);
		}

		// Event dla dodania nowej warstwy (gdy jest zmieniana grupa)
		map.on('layeradd', function(e) {
			const pozu = poziomy.find(p => p[1] === e.layer);
			if (pozu) {
				//console.log(e.layer);
				selectPanoLayer(pozu);
			}
			if (e.layer===lr_Nothing){
				lowdata=true;
			}
		});

		// Event dla usuwania warstw
		map.on('layerremove', function(e) {
			// może będzie przydatne
			if (e.layer===lr_Nothing){
				lowdata=false;
			}
		});
		
		
		// WSTĘPNE ZMIENNE PANORAM
		var lowdata=false;
		var grupa=poziomy[0];
		var panolayer=grupa[0] //pierwszy element to: lr_FotoP0
		var totalPanoramas = panolayer.getLayers()[panolayer.getLayers().length-1].feature.properties.ID; // Liczba panoram na parterze
		let currentIndex = 1; // Indeks startowy
		var picz=0;
		var jaw=0;

        // Pannellum startowy
		const viewer = pannellum.viewer('panorama', {
		"scenes": {
  			"Panus": {
			type: 'equirectangular',
			panorama: `Panos/${panolayer.getLayers()[currentIndex-1].feature.properties.NazwaZdj}.avif`,
			autoLoad: true,
			showControls: true,
			hfov: 80,
			draggable: true,
			mouseZoom: true
			}
  		}
		});
		// Update panoramy
		function updatePanorama(index) {
			var newPanoramaURL
			if (lowdata==false){
				newPanoramaURL = `Panos/${panolayer.getLayers()[currentIndex-1].feature.properties.NazwaZdj}.avif`;
			}
			else if (lowdata==true){
				newPanoramaURL = `LowPanos/${panolayer.getLayers()[currentIndex-1].feature.properties.NazwaZdj}.avif`;
			}
			const curSceneId =viewer.getScene;
			addextra(index);
			picz=viewer.getPitch()
			jaw=viewer.getYaw()
			document.getElementById('previous').disabled = true;
			document.getElementById('next').disabled = true;
			viewer.addScene(curSceneId, {
				type: 'equirectangular',
				panorama: newPanoramaURL,
				autoLoad: true,
				showControls: true,
				hfov: 80,
				draggable: true,
				mouseZoom: true,
				pitch: picz,
				yaw: jaw
			});
			viewer.loadScene(curSceneId);
			viewer.on('load', function() {
				document.getElementById('previous').disabled = false;
				document.getElementById('next').disabled = false;
			});
		}
		
		// Symuluj przycisk
		function simclick(layer) {
			map.closePopup();
			layer.fire('click');
		}
		
		// Dodaj ekstra info (!!! - do ewentualnych zmian)
		function addextra(currentId) {
			let obecnawar;
			let extrainfo;
			obecnawar=grupa[0].getLayers()[currentId-1].feature.properties;
			// Pokazanie odpowiednich informacji w nawigatorze
			if (obecnawar.Klasa.toString()=='Na zewnątrz') {
				extrainfo=`\n${obecnawar.Poziom}, ${obecnawar.Budynek}`;
			} else if (obecnawar.NrPokoju==null || obecnawar.NrPokoju=="0") {
				extrainfo=`\n${obecnawar.Poziom}, ${obecnawar.Budynek}\n${obecnawar.Klasa}`;
			} else {
				extrainfo=`\n${obecnawar.Poziom}, ${obecnawar.Budynek}\n${obecnawar.Klasa}, ${obecnawar.NrPokoju}`;
			}
			return extrainfo;
		}

        // NAWIGACJA
		document.getElementById('previous').addEventListener('click', () => {
			currentIndex=Number(currentIndex);
			totalPanoramas=Number(totalPanoramas);
			currentIndex = currentIndex === 1 ? totalPanoramas : currentIndex - 1;
			document.getElementById('counter').innerText = `${currentIndex}/${totalPanoramas}`+addextra(currentIndex);
			let wybpunkt=grupa[0].getLayers()[currentIndex-1].feature.properties
			simclick(grupa[0].getLayers()[currentIndex-1]);
			map.setView([wybpunkt.Latitude,wybpunkt.Longitude], 20);
		});

		document.getElementById('next').addEventListener('click', () => {
			currentIndex=Number(currentIndex);
			totalPanoramas=Number(totalPanoramas);
			currentIndex = currentIndex === totalPanoramas ? 1 : currentIndex + 1;
			document.getElementById('counter').innerText = `${currentIndex}/${totalPanoramas}`+addextra(currentIndex);
			let wybpunkt=grupa[0].getLayers()[currentIndex-1].feature.properties
			simclick(grupa[0].getLayers()[currentIndex-1]);
			map.setView([wybpunkt.Latitude,wybpunkt.Longitude], 20);
		});
		
		
		// OKNO MODELU 3D
		var modelButton1 = document.getElementById("modelButton1");
		var modelButton2 = document.getElementById("modelButton2");
		var modelModal = document.getElementById("modelModal");
		var closeModal = document.getElementById("closeModal");
		var modelUrl1 = "https://sketchfab.com/models/c6c3b0e5b2bb44b2a5d2976df9c4e4cd/embed?autostart=1";
        var modelUrl2 = "https://sketchfab.com/models/83ddd119c79b425da206728f0867265e/embed?autostart=1";
		var modelUrl3 = "https://sketchfab.com/models/e79689e00e704e55a32f86310b76a2f0/embed?autostart=1";
        
		modelButton1.addEventListener("click", function() {
			const randomChance = Math.random() * 100;
			modelIframe.src = randomChance < 15 ? modelUrl2 : modelUrl1;
            modelModal.style.display = "flex";
        });
        modelButton2.addEventListener("click", function() {
            const randomChance = Math.random() * 100;
			modelIframe.src = randomChance < 15 ? modelUrl2 : modelUrl3;
            modelModal.style.display = "flex";
        });

        closeModal.addEventListener("click", function() {
            modelModal.style.display = "none";
            modelIframe.src = "";
        });
        window.addEventListener("click", function(event) {
            if (event.target === modelModal) {
                modelModal.style.display = "none";
                modelIframe.src = "";
            }
        });
		
		// Zmiana rozmiaru punktów panoram od poziomu zoomu
		function updatePointSize() {
			let zoom = map.getZoom();
			function jakiZoom(zoom) {
				if (zoom >= 23) return 13;
				if (zoom >= 22) return 11;
				if (zoom >= 21) return 9;
				if (zoom >= 20) return 7;
				if (zoom >= 19) return 5;
				return 4;
			}
			let rozmiar = jakiZoom(zoom);
			poziomy.forEach(poz => {
				poz[0].eachLayer(layer => {
					if (layer.setStyle) {
						layer.setStyle({ radius: rozmiar });
					}
				});
			});
		}
		map.on('zoomend', updatePointSize);
		
		// Przycisk centrowania
		var centrum = {
		  lat: 51.1044,
		  lng: 17.0544,
		  zoom: 19
		};
		L.easyButton('<img src="css/images/home.png" style="width:24px; transform: translate(-50%, -50%); position: relative; left: 50%; top: 50%;">',function(btn,map){
		  map.setView([centrum.lat, centrum.lng], centrum.zoom);
		},'Wycentruj').addTo(map);
    </script>
</body>
</html>
